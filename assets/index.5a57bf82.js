const h=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}};h();const g="ff8a01f9e04db2dc9bcfe794cf6fbfa4";async function f(n,t="",c=""){try{const r=await L(n,t,c);let e=[];for(let i of r)e.push(await fetch(y(i.lat,i.lon),{mode:"cors"}));let o=e.map(i=>i.json());return await Promise.all(o)}catch{return null}}function y(n,t){return`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&appid=${g}&units=metric`}function C(n,t="",c=""){const r=t&&","+t,e=c&&","+c;return`https://api.openweathermap.org/geo/1.0/direct?q=${n}${r},${e}&limit=${3}&appid=${g}`}async function L(n,t="",c=""){const e=await(await fetch(C(n,t,c),{mode:"cors"})).json();return console.log(e),e}const m=document.querySelector("#app");E();function E(){const n=document.createElement("div");n.classList.toggle("card-holder");const t=w(n);m.appendChild(t),m.appendChild(n)}function w(n){const t=document.createElement("div");t.classList.toggle("input-holder");const c=document.createElement("label");c.htmlFor="city-input",c.textContent="City ";const r=document.createElement("input");return r.type="text",r.id="city-input",r.addEventListener("keypress",async e=>{if(e.key==="Enter"){e.preventDefault();let o=await f(r.value);if(o){console.log(o);for(let i of o.reverse())console.log(i),n.prepend(v(i))}else r.placeholder="Can't find city";r.value=""}}),t.appendChild(c),t.appendChild(r),t}function v(n){const t=document.createElement("div");t.classList.toggle("city-weather-card");const c=document.createElement("img");c.classList.toggle("weather-icon"),c.src=`http://openweathermap.org/img/wn/${n.weather[0].icon}@2x.png`;const r=document.createElement("p");r.classList.toggle("temperature"),r.textContent=`${n.main.temp} \xB0C`;const e=document.createElement("div");e.classList.toggle("liddle-holder");const o=document.createElement("p");o.classList.toggle("pressure"),o.textContent=`Pressure: ${n.main.pressure}mbar`;const i=document.createElement("p");i.classList.toggle("humidity"),i.textContent=`Humidity: ${n.main.humidity}%`;const l=document.createElement("p");l.classList.toggle("wind"),l.textContent=`Wind: ${n.wind.speed}m/s`,e.appendChild(o),e.appendChild(i),e.appendChild(l);const s=document.createElement("div");s.classList.toggle("right-holder");const a=document.createElement("p");a.classList.toggle("city-name"),a.textContent=n.name;const d=document.createElement("span");d.classList.toggle("country-name"),d.textContent=n.sys.country;const p=document.createElement("p");p.classList.toggle("date"),p.textContent=new Date().toJSON().slice(0,10).replace(/-/g,"/");const u=document.createElement("p");return u.classList.toggle("weather-description"),u.textContent=n.weather[0].description,s.appendChild(a),s.appendChild(d),s.appendChild(p),s.appendChild(u),t.appendChild(c),t.appendChild(r),t.appendChild(e),t.appendChild(s),t}
